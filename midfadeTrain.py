import cv2
import base64
import numpy as np
def tob64(image_path):
    with open(image_path, 'rb') as img_file:
        encoded_string = base64.b64encode(img_file.read())
    return encoded_string.decode('utf-8')

def frb64(base64_string):
    decoded_data = base64.b64decode(base64_string)
    np_data = np.fromstring(decoded_data, np.uint8)
    img = cv2.imdecode(np_data, cv2.IMREAD_COLOR)
    return img
def maps(x, in_min, in_max, out_min, out_max):
    # Map x from the input range to the output range
    return (x - in_min) * (out_max - out_min) // (in_max - in_min) + out_min
def rate_hair_fade(base64s):
    
    # Load the image
    image = frb64(base64s)
    image = cv2.GaussianBlur(image,(5,5),0)
    # Convert the image to grayscale
    gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    
    # Apply edge detection
    edges = cv2.Canny(image, threshold1=30, threshold2=100)
    
    # Find contours
    contours, _ = cv2.findContours(edges.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
    
    # Calculate the number of contours (edges of the hair fade)
    num_contours = len(contours)
    # Rate the hair fade based on the number of contours
    if num_contours >= 1000:
        return 0
    else:
        rating = num_contours  # Scale the rating to be out of 10
    ret = maps(rating,300,0,20,0)
    ret = min(ret,10)
    return ret

# Test the function
imaimp = "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"   # Provide the path to the image
hair_fade_rating = rate_hair_fade(imaimp)
cv2.imshow("name",frb64(imaimp))
cv2.waitKey(0)
